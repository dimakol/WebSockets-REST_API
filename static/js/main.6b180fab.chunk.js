(this["webpackJsonpreact-websocket-rest-app"]=this["webpackJsonpreact-websocket-rest-app"]||[]).push([[0],{36:function(e,t,n){e.exports=n(72)},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(28),o=n(13),l=(n(41),n(7)),s=n(34),u=n(9),i=n(35),f=(n(42),function(e){return c.a.createElement("div",{className:"Rate",style:{color:e.color}},e.value)}),b=(n(43),function(e){return c.a.createElement("div",{className:"Ticker"},e.rates.map((function(e,t){return c.a.createElement(f,{key:t,value:e.value,color:e.color})})))}),m=n(11),p=n.n(m),d=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),f=l[0],m=l[1],d=Object(a.useRef)(null);Object(a.useEffect)((function(){v(),d.current.onopen=function(e){try{E("subscribe")}catch(t){console.log("Got invalid message from websocket on open",t,e.data)}}}),[]),Object(a.useEffect)((function(){d.current.onmessage=function(e){var t=JSON.parse(e.data);switch(t.event){case"data":(function(e,t){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n=(parseFloat(e)+parseFloat(t))/2,a.abrupt("return",n.toFixed(2));case 5:a.prev=5,a.t0=a.catch(0),console.log(a.t0);case 8:case"end":return a.stop()}}),null,null,[[0,5]])})(t.data.bids[0][0],t.data.asks[0][0]).then((function(e){return function(e,t){var n;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n={value:t},t>e&&(n.color="Green"),t<e&&(n.color="Red"),e&&t!==e||(n.color="Black"),a.abrupt("return",n);case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}}),null,null,[[0,8]])}(n.length?n[n.length-1].value:void 0,e)})).then((function(e){return r((function(t){return[].concat(Object(s.a)(t),[e])}))}));break;case"bts:request_reconnect":v()}}}),[n]),Object(a.useEffect)((function(){d.current.onclose=function(e){e.wasClean||(console.log({error:"WebSocket error: ".concat(e.code," ").concat(e.reason)}),v())}}),[]),Object(a.useEffect)((function(){d.current.onerror=function(e){console.log("received websocket error",e)}}),[]),Object(a.useEffect)((function(){return function(){d.current.close()}}),[d]);var v=function(){d.current=new WebSocket("wss://ws.bitstamp.net")},E=function(e){if("subscribe"===e||"unsubscribe"===e){var t={event:"bts:".concat(e),data:{channel:"order_book_".concat("btcusd")}};d.current.send(JSON.stringify(t))}};return c.a.createElement("div",null,c.a.createElement(b,{rates:n}),c.a.createElement(i.a,{variant:"outline-secondary",onClick:function(){f?(E("subscribe"),m(!1)):(E("unsubscribe"),m(!0))},style:{marginBottom:"20px"}},"Start/Stop"))},v=n(14),E=n.n(v),h=n(30),k=(n(63),function(e){return c.a.createElement(h.a,{id:"albums",striped:!0,bordered:!0,hover:!0,responsive:!0},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"ID"),c.a.createElement("th",null,"User ID"),c.a.createElement("th",null,"Title"))),c.a.createElement("tbody",null,e.data.filter((function(e,t){return e&&t<10})).map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,e.id),c.a.createElement("td",null,e.userId),c.a.createElement("td",null,e.title))}))))}),O=n(31),j=function(){return c.a.createElement("div",{className:"page-center"},c.a.createElement(O.a,{animation:"border",variant:"primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))},w=(n(64),function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),s=l[0],i=l[1],f=Object(a.useState)(!1),b=Object(u.a)(f,2),m=b[0],d=b[1];return Object(a.useEffect)((function(){var e=E.a.CancelToken.source();return function(){var t;p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return d(!1),i(!0),n.prev=2,n.next=5,p.a.awrap(E()("https://jsonplaceholder.typicode.com/albums",{cancelToken:e.token}));case 5:t=n.sent,r(t.data),n.next=17;break;case 9:if(n.prev=9,n.t0=n.catch(2),d(!0),!E.a.isCancel(n.t0)){n.next=16;break}console.log("request cancelled"),n.next=17;break;case 16:throw n.t0;case 17:i(!1);case 18:case"end":return n.stop()}}),null,null,[[2,9]])}(),function(){e.cancel()}}),[]),c.a.createElement("div",{className:"RestApi"},m?c.a.createElement("div",{className:"page-center"},"Something went wrong ..."):s?c.a.createElement(j,null):c.a.createElement(k,{data:n}))}),g=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(o.b,{to:"/websocket"},"WebSocket"),c.a.createElement(o.b,{to:"/restapi"},"RestAPI"),c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/websocket",component:d}),c.a.createElement(l.a,{exact:!0,path:"/restapi",component:w})))};n(70),n(71);Object(r.render)(c.a.createElement(o.a,null,c.a.createElement(g,null)),document.querySelector("#root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.6b180fab.chunk.js.map